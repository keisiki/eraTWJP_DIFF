2018/12/16

eraTW4.640proto用お野菜なんて嫌いパッチ

許可をもらえたので
クラウンピース口上の野菜抜き料理処理を本体側に移植しました
holyさんありがとうございます



◆対象環境
[eraT0000071]eraTW4.640protoのバニラ環境

他パッチとの競合は未調査



◆内容
・クラウンピース口上の野菜抜き料理処理を本体側に移植
・敬意と感謝をこめてクラウンピースに好物Lv1ハンバーガーを追加
・料理評価判定で調理経過時間DISHSPOILが影響するように
　そういえば使ってなかったのに気づいた
　できたては好評価に係数、冷めると嫌評価に係数
・@MESSAGE_COM414に料理名で分岐を加筆
　おせち料理等に専用の地の文を追加しました
　思いついた料理に関しては埋めたが流石に全て網羅するのは無理だ
　あと、415だと表示されないのがもったいなかったので、切り出して414/415共通で表示出来るようになりました
・仕様変更に伴ってクラウンピース口上の料理関連分岐を修正
　細かな不具合をついでに修正
　・食事の地の文制御の判定が逆だったのを修正
　　ここはTASTEというかDISHNAMEで十分判定できるのでついでにGROUPMATCHでの判定に変更
　　変更したのはいいが、"モッツァレラチーズだけのサラダ"用の特殊な地の文が本体側に移動したせいで
　　GROUPMATCHなのに1項目対象の判定になってしまった
　・一緒に作ったときの野菜抜き分岐がたぶん表示されなかった
　　従来はTASTEの野菜を空文字列置換で消してたので判定できてなかった
　　仕様変更でTASTEに"野菜抜き/"がつくようになったので正しく動く
　　また、STRFINDでの野菜有無判定で野菜抜きまで引っかかるので"野菜/"で検索するように変更



◆その他
・スレで報告したが、影狼ちゃん、エレン、早苗さん、雛ちゃんの料理分岐が若干怪しい
　気が向いたらFLAG:20からDISHNAME準拠などに変更するパッチ出すかも
　
　よくよく見直したら雛ちゃんは「口上作者の意図として、日付だけで判定」してる可能性があり保留
　ライセンス的にゆるい影狼/早苗だけで料理修正パッチ出すかも

・musicroomは進捗なし
　ある程度構文は書いたが、1000曲あると取得順ランダム化処理が若干こわくて触れてない



◆つくったひと：morph
・morphのつくった以外のところの扱いはつくったひとに聞いて下さい
・配布・改造・流用、好きにしてください
・でも、その際のサポートは自分でやってね

※　era＝R-18全般の常識的な取り扱いとして例えば以下のような事はやめて下さい

・未成年者がいっぱいいる場所で広める
・R-18以外のモノをメインに扱ってる場所で取り上げる
