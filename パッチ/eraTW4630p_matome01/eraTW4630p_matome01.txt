2018/09/19

eraTW4.630proto用パッチまとめ＋α01

・毎回パッチの名前考えるのわりとダルいので以前に出したパッチに連番にしてました
　本体側のバグ修正も他パッチのとりこみもやって名前詐欺やんけって言われたら返す言葉がないかなって



◆対象環境
eraTW4.630protoのバニラ環境

以下のパッチはマージ済み

[eraT0010724]eraTW4.630proto用外出マップ正邪宅追加他パッチ
	キャラ番号直打ちから_Rename.csvを利用して可読性を上げてるのはぜひ他の人にも広めたい
	目についた所だけでも少しずつ修正しておきたいです
[eraT0010726]eraTW4.630proto用パンツとブラ処理改変+αパッチ
	ブラジャー処理での総当たり分岐直打ち指定から
	各パンツ側にコーディネートするブラの情報を持たせるリファクタリングがとてもよい
	適当に改良しときました
	・MAKE_INTしなければ0が返るのでノーブラはそれでよし
	・衣装セット.ERBで使用している@CLOTHES_ID関数を使えば装備部位と衣服名称を使って衣服が指定できます
		コメントなしでもどのブラが対応してるのかわかるようになります
		CALLF MAKE_INT(V_NAME, 10)
			↓
		CALLF MAKE_INT(V_NAME, CLOTHES_ID("上半身下着１", "Ｔシャツ"))
	・ついでに@今日のブラジャーにてノーブラが発生するように仕込むなど、夏はノーブラ率上がります
	　その他、ヤリマン時空（全員ヤリマンモード）だと安易にエロくなります
	　とりあえず非ヤリマン時空において、ニューゲームで1日に1キャラ程度はノーブラの娘が発生するくらいの確率
	・ブラジャー抽選に確率系を織り交ぜた結果、途中でブラの種類が変わるようになるバグが出た
	　ぱんつと同じ要領で、今日のブラ、パジャマ用ブラを抽選するように処理を組みました
	　@今日のブラジャーはF関数化
[eraT0010728]eraTW4.630proto用ミラダの石訪問販売デイリーパッチ
[eraT0010731]eraTW4.630proto用 パンツ関連オーバーホールパッチ
	全キャラパンツ実装しててスゲー
	
	@DISPLAY_COLLECTION_Bの改良
	・[eraT0010728]の時点でパンツ着用条件をいじっていたので競合していた
	・判定処理を各パンツデータの側に任せて記述を整理した
[eraT0010733]　ミラダの石訪問販売デイリー用ノーブラ処理修正パッチ
[eraT0010734]　eraTW4.630proto用 スカートめくりでズボンも下ろすパッチ ＋パンツオーバーホール修正
[eraT0010736]　eraTW4.630proto用 スカートめくりでズボンも下ろすパッチ ＋パンツオーバーホール修正３
	マージついでに固有パンツの色を強調してみるなど
	・[eraT0010736]で"毛糸のパンツ"、"シルクのパンツ"が出てくるが
	　"毛糸のパンツ"　→大妖精固有パンツ
	　"シルクのパンツ"→名前に一致するパンツが現環境下では存在しないはず
	・一応、固有パンツにも透けるかどうかを設定できるようにしてみた
	　しかし、全キャラやる気力がないのでとりあえず霊夢さんに設定例を乗っけとく
	　他のパンツと比較すると、基本的にはパンツは透けるものであり、透けないのが例外であるらしい
	　ルーミアパンツとかは透けないイメージ
[eraT0010740]　ミラダの石訪問販売デイリー用ノーブラ処理修正パッチ2
[eraT0010743]　eraTW4.630proto用ブラもランダム+αパッチ
	とりこんだだけ
	さらっと全固有パンツの透け設定をしてくれている
[eraT0010745]　eraTW4.630proto用 弾幕勝負コマンド追加パッチ（人柱版）
	人柱版らしいがとりこんじゃった
	気合はいっててすげぇ
[eraT0010746]　ミラダの石訪問販売デイリー用ノーブラ処理修正パッチ3
[eraT0010748]　ミラダの石訪問販売デイリー用ノーブラ処理修正パッチ4
[eraT0010699]　eraTW4.622用色々修正＋α
	競合が少なかったのですんなりいけましたが
	他のパッチが本体に正しく取り込まれてるかまでは流石に調査する気ないっす
[eraT0010749]　eraTW4.630proto用 弾幕勝負コマンド追加パッチ2
	ちょうどいいのでマージ
[eraT0010756]　ミラダの石訪問販売デイリー用ノーブラ処理修正パッチ5
[eraT0010758]　eraTW4.630proto用 小鈴口上＆クラウンピース口上1.10+α
	口上本体は入れてないが味覚設定だけ反映しといた
	
[eraT0010761]　パンツ収集状況表示TypeB修正
	マージっつうか内容読みながら手打ちでこんなもんじゃろうと作業したわけですが内容は反映されてます
	
	・股開きドロワの解禁条件
	　ほぼそのまま取り込み
	・レザーパンツの解禁条件
	　パッチの条件よりもさらに緩和した
	・こちらで変更した表示条件判定がうまいこといってなかったので見直した
	・男性おぱんつこれくしょん
	　たぶん、これ作ったところで動かす相手がいないんじゃね？
	　と思いつつもとりあえず数字直打ちで処理するのはよくないので
	　パンツデータ側に"男性下着"のオプションを用意して判定することに
	・2600種類に見えるが実際は2500種類程度
	　ばんそうこうの着用には無知幼稚等の素質が必要だが表示条件がザルになってるため
	　こちらでは修正してあります
[eraT0010762]　ミラダの石訪問販売デイリー用ノーブラ処理修正パッチ6

※[eraT0010741]　こっそりフェラパッチは◆eraTWk3.v6さんの判断待ちということでマージしてないです



◆＋α
・デート経験や愛情経験を重ねた相手に対しては、実績解除無しで劣情察知や生理周期可視化が動くように
　基本的に看破するのは実績のほうが楽だと思われ、バランスはよーわからんのでとりあえずで渋め
　既存実績の手直しはmorphはやりません
・味覚処理の微改造
　テストプレイ中に男あなたの能力見たら助手味覚効果に[ハーブ]と[パワフル]が表示されてて笑ってしまった
　健康に気を使っててTWあなたのイメージに合致しすぎている
　※[調合知識][回復早い]の取得でこうなる
　想定外の挙動だったが、面白いのであなたの助手効果も料理に付与されるように
　たぶん従来だと咲夜なりきりあなたで[瀟洒]がつかなかったんじゃないだろうか
　デメリットはあなたの助手効果は外すことが出来ないので紫苑なりきりとかやると軒並み低評価される
・妹紅の素質「音痴（＝音感がマイナス）」で芸術的な料理ができあがるのは意図していない挙動なので修正


◆未着手の作業
・>>238ファーストキス喪失関連の挙動は修正できてない
・JOB_仕事内容.ERBのキャラデータへの移行について
　@JOBMOVE(ARG)の処理の代替をどうしようかと
　エレンの処理用に@JOB_EX_K44とか作ってやってTRYCALLFORMするのがいいのかな
　ということでキャラデータ.ERBへの移行は保留状態
　そこさえクリアできれば可能っぽい



◆その他
・仕事の増設
　ノーブラ処理修正パッチ2
　追加に必要な作業を調べきれてないので保留
・演奏拡張するかも（フレーバー方面）
　内容は大体考えた
　実装が進まない



◆つくったひと：morph
・morphのつくった以外のところの扱いはつくったひとに聞いて下さい
・配布・改造・流用、好きにしてください
・でも、その際のサポートは自分でやってね

※　era＝R-18全般の常識的な取り扱いとして例えば以下のような事はやめて下さい

・未成年者がいっぱいいる場所で広める
・R-18以外のモノをメインに扱ってる場所で取り上げる
