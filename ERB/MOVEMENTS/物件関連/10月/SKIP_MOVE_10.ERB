;-----------------------------------------------------------
;遠距離移動の設定
;ARG     目的地
;ARG:1   現在地
;RETURN  次の目的地
;-----------------------------------------------------------
@SKIP_MOVE_10(ARG, ARG:1)
#DIM 現在の位置
;現在位置取得
IF ARG:1
	現在の位置 = ARG:1
ELSE
	現在の位置 = CFLAG:MASTER:現在位置
ENDIF

;目的地に直接移動できる場合そこに移動
SIF CAN_MOVE(現在の位置, ARG) & 1
	RETURN ARG

;袋小路から行ける場所は固定なので、そこを目指す
SELECTCASE 現在の位置
	CASE P1006サグメ宅・寝室
		RETURN P1005サグメ宅・居間
	CASE P1007空き家
		RETURN P1002月の都
	CASE P1008鈴瑚宅, P1009清蘭宅
		RETURN P1003玉兎街
	CASE P1012酒屋, P1013八百屋
		RETURN P1004広場
	CASE P1023門番詰め所
		RETURN P1020綿月亭・門
	CASE P1025玉兎詰め所
		RETURN P1024玉兎食堂
	CASE P1030綿月亭・風呂
		RETURN P1029綿月亭・脱衣所
	CASE P1031宝物庫, P1032レイセン私室, P1033綿月亭・空き部屋
		RETURN P1022一階回廊
	CASE P1036四阿
		RETURN P1035中庭
	CASE P1041豊姫私室, P1042依姫私室, P1043書斎, P1044応接間
		RETURN P1040二階回廊
	CASE P1051ドレミー宅・寝室, P1052ドレミー宅・倉庫
		RETURN P1050ドレミー宅・居間
	CASE P1054ドレミー宅・風呂, P1055ドレミー宅・トイレ
		RETURN P1053ドレミー宅・洗面所
	CASE P1062台所, P1063純狐邸・空き部屋, P1064クラウンピース私室, P1065物置, P1068純狐邸・中庭
		RETURN P1061居間
	CASE P1067純狐邸・風呂
		RETURN P1066純狐邸・脱衣所
	CASE P1071純狐私室, P1072ヘカーティア私室
		RETURN P1070屋上
ENDSELECT

;直接移動できない場合、1つ近い位置を暫定目的地に設定し直してループ
;基本的に最短で行けるコースを設定する
;現在地によってコースが変わることも考慮して対応する
SELECTCASE ARG
	CASE P1001槐安通路
		SELECTCASE 現在の位置
		CASE P1051ドレミー宅・寝室 TO P1055ドレミー宅・トイレ
			RETURN P1050ドレミー宅・居間
		CASEELSE
			RETURN P1002月の都
		ENDSELECT
	CASE P1002月の都
		SELECTCASE 現在の位置
		CASE P1006サグメ宅・寝室
			RETURN P1005サグメ宅・居間
		CASE P1021綿月亭・玄関 TO P1044応接間
			RETURN P1020綿月亭・門
		CASE P1050ドレミー宅・居間 TO P1055ドレミー宅・トイレ
			RETURN P1001槐安通路
		CASEELSE
			RETURN P1003玉兎街
		ENDSELECT
	CASE P1003玉兎街
		SELECTCASE 現在の位置
		CASE P1012酒屋, P1013八百屋
			RETURN P1004広場
		CASE P1015砂浜, P1016入り江, P1060純狐邸・玄関 TO P1072ヘカーティア私室
			RETURN P1014桃林
		CASEELSE
			RETURN P1002月の都
		ENDSELECT
	CASE P1004広場
		RETURN P1003玉兎街
	CASE P1005サグメ宅・居間, P1007空き家
		RETURN P1002月の都
	CASE P1006サグメ宅・寝室
		RETURN P1005サグメ宅・居間
	CASE P1008鈴瑚宅, P1009清蘭宅
		RETURN P1003玉兎街
	CASE P1010食事処, P1011甘味処
		SELECTCASE 現在の位置
		CASE P1012酒屋, P1013八百屋
			RETURN P1004広場
		CASEELSE
			RETURN P1003玉兎街
		ENDSELECT
	CASE P1012酒屋, P1013八百屋
		RETURN P1004広場
	CASE P1014桃林
		SELECTCASE 現在の位置
		CASE P1016入り江, P1060純狐邸・玄関 TO P1072ヘカーティア私室
			RETURN P1015砂浜
		CASEELSE
			RETURN P1003玉兎街
		ENDSELECT
	CASE P1015砂浜
		SELECTCASE 現在の位置
		CASE P1060純狐邸・玄関 TO P1072ヘカーティア私室
			RETURN P1016入り江
		CASEELSE
			RETURN P1014桃林
		ENDSELECT
	CASE P1016入り江
		SELECTCASE 現在の位置
		CASE P1060純狐邸・玄関 TO P1072ヘカーティア私室
			RETURN P1060純狐邸・玄関
		CASEELSE
			RETURN P1015砂浜
		ENDSELECT

	CASE P1020綿月亭・門
		SELECTCASE 現在の位置
		CASE P1025玉兎詰め所
			RETURN P1024玉兎食堂
		CASE P1021綿月亭・玄関 TO P1044応接間
			RETURN P1021綿月亭・玄関
		CASEELSE
			RETURN P1002月の都
		ENDSELECT
	CASE P1021綿月亭・玄関
		SELECTCASE 現在の位置
		CASE P1025玉兎詰め所
			RETURN P1024玉兎食堂
		CASE P1027厨房
			RETURN P1028食料庫
		CASE P1021綿月亭・玄関 TO P1044応接間
			RETURN P1022一階回廊
		CASEELSE
			RETURN P1020綿月亭・門
		ENDSELECT
	CASE P1022一階回廊
		SELECTCASE 現在の位置
		CASE P1027厨房
			RETURN P1026食堂
		CASE P1036四阿
			RETURN P1035中庭
		CASE P1030綿月亭・風呂
			RETURN P1029綿月亭・脱衣所
		CASE P1041豊姫私室 TO P1044応接間
			RETURN P1040二階回廊
		CASEELSE
			RETURN P1021綿月亭・玄関
		ENDSELECT
	CASE P1023門番詰め所
		RETURN P1020綿月亭・門
	CASE P1024玉兎食堂
		SELECTCASE 現在の位置
		CASE P1022一階回廊, P1026食堂 TO P1044応接間
			RETURN P1021綿月亭・玄関
		CASEELSE
			RETURN P1020綿月亭・門
		ENDSELECT
	CASE P1025玉兎詰め所
		RETURN P1024玉兎食堂
	CASE P1026食堂
		SELECTCASE 現在の位置
		CASE P1028食料庫
			RETURN P1027厨房
		CASEELSE
			RETURN P1022一階回廊
		ENDSELECT
	CASE P1027厨房
		SELECTCASE 現在の位置
		CASE P1022一階回廊, P1029綿月亭・脱衣所 TO P1044応接間
			RETURN P1026食堂
		CASEELSE
			RETURN P1028食料庫
		ENDSELECT
	CASE P1028食料庫
		SELECTCASE 現在の位置
		CASE P1026食堂
			RETURN P1027厨房
		CASEELSE
			RETURN P1021綿月亭・玄関
		ENDSELECT
	CASE P1029綿月亭・脱衣所, P1031宝物庫, P1032レイセン私室, P1033綿月亭・空き部屋, P1035中庭, P1040二階回廊
		RETURN P1022一階回廊
	CASE P1030綿月亭・風呂
		RETURN P1029綿月亭・脱衣所
	CASE P1036四阿
		RETURN P1035中庭
	CASE P1041豊姫私室, P1042依姫私室, P1043書斎, P1044応接間
		RETURN P1040二階回廊

	CASE P1050ドレミー宅・居間
		SELECTCASE 現在の位置
		CASE P1054ドレミー宅・風呂, P1055ドレミー宅・トイレ
			RETURN P1053ドレミー宅・洗面所
		CASEELSE
			RETURN P1001槐安通路
		ENDSELECT
	CASE P1051ドレミー宅・寝室, P1052ドレミー宅・倉庫, P1053ドレミー宅・洗面所
		RETURN P1050ドレミー宅・居間
	CASE P1054ドレミー宅・風呂, P1055ドレミー宅・トイレ
		RETURN P1053ドレミー宅・洗面所

	CASE P1060純狐邸・玄関
		SELECTCASE 現在の位置
		CASE P1060純狐邸・玄関 TO P1072ヘカーティア私室
			RETURN P1061居間
		CASEELSE
			RETURN P1016入り江
		ENDSELECT
	CASE P1061居間
		SELECTCASE 現在の位置
		CASE P1067純狐邸・風呂
			RETURN P1066純狐邸・脱衣所
		CASE P1071純狐私室 TO P1072ヘカーティア私室
			RETURN P1070屋上
		CASEELSE
			RETURN P1060純狐邸・玄関
		ENDSELECT
	CASE P1062台所, P1063純狐邸・空き部屋, P1064クラウンピース私室, P1065物置, P1066純狐邸・脱衣所, P1068純狐邸・中庭, P1070屋上
		RETURN P1061居間
	CASE P1067純狐邸・風呂
		RETURN P1066純狐邸・脱衣所
	CASE P1071純狐私室, P1072ヘカーティア私室
		RETURN P1070屋上
ENDSELECT