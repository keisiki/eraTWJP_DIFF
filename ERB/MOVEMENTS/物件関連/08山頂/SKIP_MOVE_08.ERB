;-----------------------------------------------------------
;遠距離移動の設定
;ARG     目的地
;ARG:1   現在地
;RETURN  次の目的地
;-----------------------------------------------------------
@SKIP_MOVE_8(ARG, ARG:1)
#DIM 現在の位置
;現在位置取得
IF ARG:1
	現在の位置 = ARG:1
ELSE
	現在の位置 = CFLAG:MASTER:現在位置
ENDIF

;目的地に直接移動できる場合そこに移動
SIF CAN_MOVE(現在の位置, ARG) & 1
	RETURN ARG

;袋小路から行ける場所は固定なので、そこを目指す
SELECTCASE 現在の位置
	CASE P806滝の裏
		RETURN P802橋
	CASE P813社務所
		RETURN P811境内
	CASE P822台所, P823空室, P824トイレ, P825風呂
		RETURN P821土間
	CASE P833桃園
		RETURN P832有頂天街
	CASE P837比那名居邸風呂
		RETURN P834比那名居邸土間
	CASE P841衣玖私室, P842比那名居邸物置
		RETURN P838比那名居邸居間
	CASE P851久侘歌の小屋, P852駒草の小屋, P853魅須丸の小屋, P854龍宅
		RETURN P805頂上
	CASE P856百々世の住処
		RETURN P855虹龍洞
ENDSELECT

;直接移動できない場合、1つ近い位置を暫定目的地に設定し直してループ
;基本的に最短で行けるコースを設定する
;現在地によってコースが変わることも考慮して対応する
SELECTCASE ARG
	CASE P801山頂入り口
		RETURN P802橋
	CASE P802橋
		RETURN P803索道駅
	CASE P803索道駅
		SELECTCASE 現在の位置
		CASE P801山頂入り口, P807椛宅, P806滝の裏
			RETURN P802橋
		CASEELSE
			RETURN P804守矢神社鳥居
		ENDSELECT
	CASE P804守矢神社鳥居
		SELECTCASE 現在の位置
		CASE P801山頂入り口, P807椛宅, P802橋, P806滝の裏, P808文宅, P809はたて宅
			RETURN P803索道駅
		CASE P811境内 TO P826廊下
			RETURN P811境内
		CASEELSE
			RETURN P805頂上
		ENDSELECT
	CASE P805頂上
		SELECTCASE 現在の位置
		CASE P856百々世の住処
			RETURN P855虹龍洞
		CASE P831比那名居邸前 TO P842比那名居邸物置
			RETURN P830玄雲海
		CASEELSE
			RETURN P804守矢神社鳥居
		ENDSELECT
	CASE P806滝の裏, P807椛宅
		RETURN P802橋
	CASE P808文宅, P809はたて宅
		SELECTCASE 現在の位置
		CASE P801山頂入り口, P807椛宅, P806滝の裏
			RETURN P802橋
		CASEELSE
			RETURN P803索道駅
		ENDSELECT
	CASE P810山小屋
		SELECTCASE 現在の位置
		CASE P801山頂入り口, P807椛宅, P802橋, P806滝の裏, P808文宅, P809はたて宅
			RETURN P803索道駅
		CASEELSE
			RETURN P804守矢神社鳥居
		ENDSELECT
	;▼守矢神社
	CASE P811境内
		SELECTCASE 現在の位置
		CASE P815庭
			RETURN P814湖畔
		CASE P811境内 TO P826廊下
			RETURN P821土間
		CASEELSE
			RETURN P804守矢神社鳥居
		ENDSELECT
	CASE P812本殿
		SELECTCASE 現在の位置
		CASE P814湖畔, P813社務所
			RETURN P811境内
		CASE P811境内 TO P826廊下
			RETURN P826廊下
		CASEELSE
			RETURN P811境内
		ENDSELECT
	CASE P813社務所
		RETURN P811境内
	CASE P814湖畔
		SELECTCASE 現在の位置
		CASE P812本殿, P813社務所, P821土間
			RETURN P811境内
		CASE P811境内 TO P826廊下
			RETURN P815庭
		CASEELSE
			RETURN P811境内
		ENDSELECT
	CASE P815庭
		SELECTCASE 現在の位置
		CASE P820早苗私室 TO P825風呂
			RETURN P821土間
		CASE P811境内, P813社務所
			RETURN P814湖畔
		CASE P811境内 TO P826廊下
			RETURN P816縁側
		CASEELSE
			RETURN P814湖畔
		ENDSELECT
	CASE P816縁側
		SELECTCASE 現在の位置
		CASE P814湖畔
			RETURN P815庭
		CASE P812本殿
			RETURN P826廊下
		CASEELSE
			RETURN P821土間
		ENDSELECT
	CASE P817神奈子私室
		SELECTCASE 現在の位置
		CASE P820早苗私室
			RETURN P819居間
		CASEELSE
			RETURN P816縁側
		ENDSELECT
	CASE P818諏訪子私室
		SELECTCASE 現在の位置
		CASE P815庭, P814湖畔, P826廊下, P812本殿, P819居間
			RETURN P816縁側
		CASEELSE
			RETURN P821土間
		ENDSELECT
	CASE P819居間
		SELECTCASE 現在の位置
		CASE P818諏訪子私室, P815庭, P814湖畔
			RETURN P816縁側
		CASEELSE
			RETURN P826廊下
		ENDSELECT
	CASE P820早苗私室
		SELECTCASE 現在の位置
		CASE P817神奈子私室
			RETURN P819居間
		CASE P812本殿
			RETURN P826廊下
		CASEELSE
			RETURN P821土間
		ENDSELECT
	CASE P821土間
		SELECTCASE 現在の位置
		CASE P819居間, P812本殿
			RETURN P826廊下
		CASE P817神奈子私室
			RETURN P816縁側
		CASEELSE
			RETURN P811境内
		ENDSELECT
	CASE P822台所, P823空室, P824トイレ, P825風呂
		RETURN P821土間
	CASE P826廊下
		SELECTCASE 現在の位置
		CASE P815庭, P817神奈子私室, P818諏訪子私室
			RETURN P816縁側
		CASEELSE
			RETURN P821土間
		ENDSELECT
	;▼天界
	CASE P830玄雲海
		SELECTCASE 現在の位置
		CASE P831比那名居邸前 TO P842比那名居邸物置
			RETURN P832有頂天街
		CASEELSE
			RETURN P805頂上
		ENDSELECT
	CASE P831比那名居邸前
		SELECTCASE 現在の位置
		CASE P834比那名居邸土間 TO P842比那名居邸物置
			RETURN P834比那名居邸土間
		CASEELSE
			RETURN P832有頂天街
		ENDSELECT
	CASE P832有頂天街
		SELECTCASE 現在の位置
		CASE P834比那名居邸土間 TO P842比那名居邸物置
			RETURN P831比那名居邸前
		CASEELSE
			RETURN P830玄雲海
		ENDSELECT
	CASE P833桃園
		RETURN P832有頂天街
	CASE P834比那名居邸土間
		SELECTCASE 現在の位置
		CASE P834比那名居邸土間 TO P842比那名居邸物置
			RETURN P838比那名居邸居間
		CASEELSE
			RETURN P831比那名居邸前
		ENDSELECT
	CASE P835比那名居邸応接間, P836比那名居邸厨房, P837比那名居邸風呂, P838比那名居邸居間
		RETURN P834比那名居邸土間
	CASE P839比那名居邸和室 TO P842比那名居邸物置
		RETURN P838比那名居邸居間
	;▼頂上部
	CASE P851久侘歌の小屋, P852駒草の小屋, P853魅須丸の小屋, P854龍宅, P855虹龍洞
		RETURN P805頂上
	CASE P856百々世の住処
		RETURN P855虹龍洞
ENDSELECT
