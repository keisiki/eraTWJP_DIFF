;-----------------------------------------------------------
;遠距離移動の設定
;ARG     目的地
;ARG:1   現在地
;RETURN  次の目的地
;-----------------------------------------------------------
@SKIP_MOVE_3(ARG, ARG:1)
#DIM 現在の位置
;現在位置取得
IF ARG:1
	現在の位置 = ARG:1
ELSE
	現在の位置 = CFLAG:MASTER:現在位置
ENDIF

;目的地に直接移動できる場合そこに移動
SIF CAN_MOVE(現在の位置, ARG) & 1
	RETURN ARG

;袋小路から行ける場所は固定なので、そこを目指す
SELECTCASE 現在の位置
CASE P305納屋
	RETURN P306裏庭
CASE P311パチュリー私室, P312小悪魔私室
	RETURN P310図書館
CASE P316一階トイレ
	RETURN P309広間
CASE P320咲夜私室, P321空き部屋, P322二階トイレ, P323メイド妖精詰め所, P324大バルコニー
	RETURN P319二階廊下
CASE P327小バルコニー
	RETURN P326レミリア私室
CASE P329倉庫, P330使用人部屋, P331地下室
	RETURN P328地下廊下
CASE P333大浴場
	RETURN P332脱衣所
CASE P337廃洋館・キッチン, P338廃洋館・風呂
	RETURN P335廃洋館・広間
CASE P340ルナサ私室, P341メルラン私室, P342リリカ私室
	RETURN P339廃洋館・二階廊下
CASE P344レティのかまくら, P345チルノのかまくら, P346大妖精の棲家
	RETURN P343湖畔
CASE P348霧の湖・湖底
	RETURN P347霧の湖
ENDSELECT

;直接移動できない場合、1つ近い位置を暫定目的地に設定し直してループ
;基本的に最短で行けるコースを設定する
;現在地によってコースが変わることも考慮して対応する
SELECTCASE ARG
	CASE P301正門
		SELECTCASE 現在の位置
		CASE P305納屋 TO P333大浴場
			RETURN P302庭
		CASEELSE
			RETURN P343湖畔
		ENDSELECT
	CASE P302庭
		SELECTCASE 現在の位置
		CASE P310図書館, P311パチュリー私室, P312小悪魔私室
			RETURN P307東テラス
		CASE P315応接間
			RETURN P308西テラス
		CASE P305納屋
			RETURN P306裏庭
		CASE P313厨房 TO P333大浴場
			RETURN P309広間
		CASEELSE
			RETURN P301正門
		ENDSELECT
	CASE P303守衛小屋, P304空き小屋
		SELECTCASE 現在の位置
		CASE P305納屋 TO P333大浴場
			RETURN P302庭
		CASEELSE
			RETURN P301正門
		ENDSELECT
	CASE P305納屋
		RETURN P306裏庭
	CASE P306裏庭
		SELECTCASE 現在の位置
		CASE P314食堂
			RETURN P313厨房
		CASEELSE
			RETURN P302庭
		ENDSELECT
	CASE P307東テラス
		SELECTCASE 現在の位置
		CASE P308西テラス, P315応接間
			RETURN P302庭
		CASE P309広間 TO P333大浴場
			RETURN P310図書館
		CASEELSE
			RETURN P302庭
		ENDSELECT
	CASE P308西テラス
		SELECTCASE 現在の位置
		CASE P307東テラス, P310図書館 TO P312小悪魔私室
			RETURN P302庭
		CASE P309広間 TO P333大浴場
			RETURN P315応接間
		CASEELSE
			RETURN P302庭
		ENDSELECT
	CASE P309広間
		SELECTCASE 現在の位置
		CASE P307東テラス, P310図書館 TO P312小悪魔私室
			RETURN P310図書館
		CASE P308西テラス
			RETURN P315応接間
		CASE P313厨房
			RETURN P314食堂
		CASE P329倉庫 TO P333大浴場
			RETURN P328地下廊下
		CASE P320咲夜私室 TO P327小バルコニー
			RETURN P319二階廊下
		CASEELSE
			RETURN P302庭
		ENDSELECT
	CASE P310図書館
		RETURN P309広間
	CASE P311パチュリー私室, P312小悪魔私室
		RETURN P310図書館
	CASE P313厨房
		SELECTCASE 現在の位置
		CASE P309広間 TO P333大浴場
			RETURN P314食堂
		CASEELSE
			RETURN P306裏庭
		ENDSELECT
	CASE P314食堂
		SELECTCASE 現在の位置
		CASE P305納屋, P306裏庭
			RETURN P306裏庭
		CASEELSE
			RETURN P309広間
		ENDSELECT
	CASE P315応接間
		RETURN P309広間
	CASE P316一階トイレ
		RETURN P309広間
	CASE P319二階廊下
		RETURN P309広間
	CASE P320咲夜私室 TO P326レミリア私室
		RETURN P319二階廊下
	CASE P327小バルコニー
		RETURN P326レミリア私室
	CASE P328地下廊下
		RETURN P309広間
	CASE P329倉庫 TO P332脱衣所
		RETURN P328地下廊下
	CASE P333大浴場
		RETURN P332脱衣所

	CASE P334廃洋館・入り口
		SELECTCASE 現在の位置
		CASE P337廃洋館・キッチン TO P342リリカ私室
			RETURN P335廃洋館・広間
		CASEELSE
			RETURN P343湖畔
		ENDSELECT
	CASE P335廃洋館・広間
		RETURN P334廃洋館・入り口
	CASE P337廃洋館・キッチン TO P339廃洋館・二階廊下
		RETURN P335廃洋館・広間
	CASE P340ルナサ私室 TO P342リリカ私室
		RETURN P339廃洋館・二階廊下

	CASE P343湖畔
		SELECTCASE 現在の位置
		CASE P301正門 TO P333大浴場
			RETURN P301正門
		CASE P334廃洋館・入り口 TO P342リリカ私室
			RETURN P334廃洋館・入り口
		CASEELSE
			RETURN P347霧の湖
		ENDSELECT
	CASE P344レティのかまくら, P345チルノのかまくら, P346大妖精の棲家
		RETURN P343湖畔
	CASE P347霧の湖
		RETURN P343湖畔
	CASE P348霧の湖・湖底
		RETURN P347霧の湖
ENDSELECT
