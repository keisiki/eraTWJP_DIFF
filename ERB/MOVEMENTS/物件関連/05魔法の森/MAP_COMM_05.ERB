;--------------------------------------------------
;	マップ内移動処理拡張パッチ付属
;	命蓮寺MAP用関数
;--------------------------------------------------

@MAP_PLACENAME_5(ARG)
#FUNCTIONS
#DIM PLACEID

IF GET_MAPID(ARG) == MAIN_MAP
	SELECTCASE ARG
		CASE 501 TO (MAXROOM - 1)
			RETURNF STR:(ARG + 8000)
		CASE 598
			RETURNF OMANEKI_PLACE()
		CASE 599
			RETURNF "スキマ空間"
		CASE MAXROOM
			RETURNF "森の外"
		CASEELSE
			RETURNF "不明"
	ENDSELECT
ELSE
	RETURNF "不明"
ENDIF

@MAP_VIEWING_5(AA,COLOR)
#DIMS REF AA, 0
#DIMS REF COLOR, 0
IF !TFLAG:マップ切り替え
	SELECTCASE CFLAG:MASTER:現在位置
		CASE 510 TO 515
			TFLAG:マップ切り替え = 3
		CASE 521 TO 533
			TFLAG:マップ切り替え = 2
		CASE 534 TO 537
			TFLAG:マップ切り替え = 4
		CASEELSE
			TFLAG:マップ切り替え = 1
	ENDSELECT
ENDIF
CALL DRAW_INFORMATIONLINE(@"%MAPNAME:(TFLAG:マップ切り替え)%")
PRINTFORML 
IF RECOLOREDMAPS
TRYCCALLFORM COLOREDMAP_FOREST_{TFLAG:マップ切り替え}(AA,COLOR)
CATCH
RECOLOREDMAPS = 0
CALL DRAW_MAP
RECOLOREDMAPS = 1
RETURN
ENDCATCH
ELSE
TRYCALLFORM MAP_FOREST_{TFLAG:マップ切り替え}(AA)
ENDIF

@MAP_CAN_MOVE_5(ARG, ARG:1)
#FUNCTION
#DIM 在宅
SELECTCASE ARG
	;こーりんどー
	CASE 502
		IF !INRANGE(TIME,600,1080)
			TFLAG:移動不能メッセージ = ARG
			RETURNF 0
		ENDIF
ENDSELECT
RETURNF 1



@MAP_CANNOT_WORD_5(ARG)
SELECTCASE TFLAG:移動不能メッセージ
	CASE 502
		PRINTFORMW 営業時間外だ
	CASEELSE
ENDSELECT

@マップ紹介_5
;とりあえず5行
PRINTFORML 魔理沙宅や人形の館、ふわふわエレンの店を中心としたエリア。
PRINTFORML アイテム無しでも調合が可能な場所や、複数の採集ポイントを有する。
PRINTFORML なかでも「キノコ群生地」はこの拠点選択時のみの採集場所となっており、キノコ系アイテムが採集したい場合にはおすすめ。
PRINTFORML 部屋もそれなりに多く掃除の腕の振るい甲斐はあるが、手伝える拠点内での仕事は控えめ。
PRINTFORML 無縁塚からは中有の道へ移動することができる。
