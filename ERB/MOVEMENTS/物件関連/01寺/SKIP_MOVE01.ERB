;-----------------------------------------------------------
;遠距離移動の設定
;ARG     目的地
;ARG:1   現在地
;RETURN  次の目的地
;-----------------------------------------------------------
@SKIP_MOVE_1(ARG, ARG:1)
#DIM 現在の位置
;現在位置取得
IF ARG:1
	現在の位置 = ARG:1
ELSE
	現在の位置 = CFLAG:MASTER:現在位置
ENDIF

;目的地に直接移動できる場合そこに移動
SIF CAN_MOVE(現在の位置, ARG) & 1
	RETURN ARG

;袋小路から行ける場所は固定なので、そこを目指す
SELECTCASE 現在の位置
	CASE P103本堂
		RETURN P104講堂
	CASE P105経蔵, P119離れ, P122梵鐘楼, P137マミゾウの棲家
		RETURN P102境内
	CASE P111台所
		RETURN P108居間
	CASE P112風呂
		RETURN P107土間
	CASE P120物置
		RETURN P106裏庭
	CASE P125屠自古私室, P127布都私室, P128神子私室, P132調薬室
		RETURN P130廊下
	CASE P133湯殿, P134蔵, P138鐘楼, P139邪仙楼
		RETURN P124霊廟広場
ENDSELECT

;直接移動できない場合、1つ近い位置を暫定目的地に設定し直してループ
;基本的に最短で行けるコースを設定する
;現在地によってコースが変わることも考慮して対応する
SELECTCASE ARG
	CASE P101山門
		SELECTCASE 現在の位置
		CASE P123霊廟大門 TO P134蔵, P138鐘楼, P139邪仙楼
			RETURN P140お地蔵通り
		CASEELSE
			RETURN P102境内
		ENDSELECT
	CASE P102境内
		SELECTCASE 現在の位置
		CASE P123霊廟大門 TO P134蔵, P138鐘楼, P139邪仙楼, P140お地蔵通り
			RETURN P101山門
		CASE P106裏庭, P110縁側, P120物置
			RETURN P121墓地
		CASEELSE
			RETURN P107土間
		ENDSELECT
	CASE P103本堂
		RETURN P104講堂
	CASE P104講堂, P105経蔵, P119離れ, P122梵鐘楼, P137マミゾウの棲家
		RETURN P102境内
	CASE P106裏庭
		SELECTCASE 現在の位置
		CASE P108居間 TO P111台所, P113ナズーリン私室 TO P118白蓮私室, P135廊下, P136響子私室
			RETURN P110縁側
		CASEELSE
			RETURN P121墓地
		ENDSELECT
	CASE P107土間
		SELECTCASE 現在の位置
		CASE P106裏庭, P109女苑私室 TO P118白蓮私室, P120物置, P135廊下, P136響子私室
			RETURN P108居間
		CASEELSE
			RETURN P102境内
		ENDSELECT
	CASE P108居間
		SELECTCASE 現在の位置
		CASE P106裏庭, P110縁側, P113ナズーリン私室 TO P118白蓮私室, P120物置, P136響子私室
			RETURN P135廊下
		CASEELSE
			RETURN P107土間
		ENDSELECT
	CASE P109女苑私室
		SELECTCASE 現在の位置
		CASE P106裏庭, P110縁側, P113ナズーリン私室 TO P118白蓮私室, P120物置, P136響子私室
			RETURN P135廊下
		CASEELSE
			RETURN P108居間
		ENDSELECT
	CASE P110縁側
		SELECTCASE 現在の位置
		CASE P107土間 TO P118白蓮私室, P136響子私室
			RETURN P135廊下
		CASEELSE
			RETURN P106裏庭
		ENDSELECT
	CASE P111台所
		RETURN P108居間
	CASE P112風呂
		RETURN P107土間
	CASE P113ナズーリン私室, P115星私室
		SELECTCASE 現在の位置
		CASE P109女苑私室 TO P118白蓮私室, P136響子私室
			RETURN P135廊下
		CASEELSE
			RETURN P110縁側
		ENDSELECT
	CASE P114ムラサ私室, P116一輪私室, P117ぬえ私室, P118白蓮私室, P136響子私室
		RETURN P135廊下
	CASE P120物置
		RETURN P106裏庭
	CASE P121墓地
		SELECTCASE 現在の位置
		CASE P109女苑私室, P110縁側, P113ナズーリン私室 TO P118白蓮私室, P120物置, P135廊下, P136響子私室
			RETURN P106裏庭
		CASEELSE
			RETURN P102境内
		ENDSELECT

	CASE P123霊廟大門
		SELECTCASE 現在の位置
		CASE P125屠自古私室 TO P132調薬室
			RETURN P124霊廟広場
		CASEELSE
			RETURN P140お地蔵通り
		ENDSELECT
	CASE P124霊廟広場
		SELECTCASE 現在の位置
		CASE P125屠自古私室 TO P132調薬室
			RETURN P126道場
		CASEELSE
			RETURN P123霊廟大門
		ENDSELECT
	CASE P125屠自古私室, P127布都私室, P128神子私室, P132調薬室, P129客間, P131枯山水
		RETURN P130廊下
	CASE P126道場
		SELECTCASE 現在の位置
		CASE P125屠自古私室 TO P132調薬室
			RETURN P130廊下
		CASEELSE
			RETURN P124霊廟広場
		ENDSELECT
	CASE P130廊下
		RETURN P126道場
	CASE P133湯殿, P134蔵, P138鐘楼, P139邪仙楼
		RETURN P124霊廟広場

	CASE P135廊下
		SELECTCASE 現在の位置
		CASE P106裏庭, P110縁側, P120物置, P121墓地
			RETURN P110縁側
		CASEELSE
			RETURN P108居間
		ENDSELECT
	CASE P140お地蔵通り
		SELECTCASE 現在の位置
		CASE P123霊廟大門 TO P134蔵, P138鐘楼, P139邪仙楼
			RETURN P123霊廟大門
		CASEELSE
			RETURN P101山門
		ENDSELECT
ENDSELECT
