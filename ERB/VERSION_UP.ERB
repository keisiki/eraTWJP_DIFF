;変数の書き換えなどを伴なうバージョンアップ用
@VERSION_UP
SIF !GETBIT(FLAG:1000, 1)
	CALL KAISYONASI
SIF !GETBIT(FLAG:1000, 2) && FLAG:地主
	CALL MODE_NOUMIN
SIF !GETBIT(FLAG:1000, 3)
	CALL BUGFIX_KOIBITO
SETBIT FLAG:1000, 3
SIF !GETBIT(FLAG:1000, 4)
	CALL BUGFIX_KOIBITO
SETBIT FLAG:1000, 4
@KAISYONASI
SETBIT FLAG:1000, 1
PRINTFORML 自分から相手に告白できる程度は度胸ある？
CALL ASK_YN("そりゃもう","無理です")
IF !RESULT
	PRINTFORMW 甲斐性無しモードを使用しません
	FLAG:甲斐性無 = 0
ELSE
	PRINTFORMW 甲斐性無しモードをオンにします（一部コマンドが使用不能・相手からの押し倒し強化）
	FLAG:甲斐性無 = 1
ENDIF

@BUGFIX_KOIBITO
VARSET LOCAL

PRINTFORML 前バージョンの不具合解消のため、一人を除き恋人をリセットします
PRINTFORMW 対価として詫びミラダの石が送られます

FLAG:追加恋人枠 = 0
ITEM:ミラダの石 += 1

FOR LOCAL,1,CHARANUM
	SIF TALENT:LOCAL:恋人
		LOCAL:1 ++
NEXT



SIF LOCAL:1 <= 1
	RETURN


PRINTFORML 恋人状態を維持するキャラを選んでください

FOR LOCAL,1,CHARANUM
	SIF TALENT:LOCAL:恋人
		PRINTFORMLC [{LOCAL}] %CALLNAME:LOCAL%
NEXT
PRINTFORML 
INPUT
SIF TALENT:RESULT:恋人
	LOCAL:2 = RESULT

FOR LOCAL,1,CHARANUM
	TALENT:LOCAL:恋人 = 0
NEXT

TALENT:(LOCAL:2):恋人 = 1
TALENT:MASTER:恋人 = LOCAL:2

PRINTFORMW リセットしました