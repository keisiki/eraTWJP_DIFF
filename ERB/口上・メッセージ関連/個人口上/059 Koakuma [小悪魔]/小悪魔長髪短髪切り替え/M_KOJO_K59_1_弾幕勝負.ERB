;==================================================
;弾幕勝負
;==================================================
;
@M_KOJO_長短髪_MESSAGE_COM_K59_DANMAKU(ARGS, 相手残機)
#DIM 相手残機
;全体の流れ
;①【戦闘前】→②ダイスロールとプレイヤー選択肢、ハンデをつけた場合は【ハンデ口上】→③対応スキルが発動した場合【スキル口上】→④被弾判定、キャラが被弾したなら【被弾口上】→
;どちらかの残機が0になっていなければ②に戻る→⑤【戦闘後口上】

;--------------------------------------------------
;記入チェック（=0, 非表示、1, 表示）
LOCAL = 1
;-------------
IF LOCAL
	SIF FLAG:口上色
		TRYCALLFORM M_KOJO_長短髪_COLOR_K{NO:TARGET}
	;-------------------------------------------------
	;小分岐
	;-------------------------------------------------
	;戦闘前
	HANDICAP_FIXED = 0
	HANDICAP_RAND = 0
	;ハンデをつけることができ、数値が大きいほどあなたが不利になる　数値が負ならあなたが有利に
	;キャラの能力に関わらずクッソ強くしたり弱くしたりできる
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "戦闘前"
		PRINTFORML 「私とやりたいんですか?いいですけども」
		;ここから、能力で各台詞に分岐。ってイメージ。
		;小悪魔より戦闘技能が高い。もしくは小悪魔に勝利済み
		IF ABL:戦闘能力 < ABL:MASTER:戦闘能力 || CFLAG:TARGET:弾幕勝負勝利 == 1
			PRINTFORMW 「うーん、正直、私に勝算はない気もするんですが…まあ、気軽に、本気で行きましょうか」
		;小悪魔より戦闘技能が低い。小悪魔に勝利済みの場合は発生しない。あと、話としてはここだけ「本気」ではなく「手は抜かない」って表現なのがポイント
		ELSEIF ABL:戦闘能力 > ABL:MASTER:戦闘能力
			PRINTFORML 「でも、下手したら、私が目隠しして座ってても、私が勝っちゃうんじゃないですかね?」
			PRINTFORMW 「ま、それでもハンデつけたりみたいな手抜きはしません。やらせていただきましょう」
		;これは戦闘技能が小悪魔と同格
		ELSE
			PRINTFORMW 「やるからには、本気で行きましょうか」
		ENDIF
		;ここから共通
		PRINTFORMW 「それじゃあ、始めましょうか…いざ、尋常に…」
		PRINTL [0] 勝負!
		SIF MESSKIP()
		INPUT
		PRINTFORML 「勝負!」
		PRINTFORMW %NICKNAME:59%と%CALLNAME:MASTER%が同時に、戦いの合図を出す
		;あなたが個性あるというか、ｼｬｧﾍﾞｯﾀｧｧｧｧｧｧｧ!!ってなる事は個人的な趣味でも避けてたのだが、決闘前に声を揃えてとか憧れるし…
		RETURN 0
	ENDIF
	;-------------------------------------------------
	;ハンデ
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "ハンデ"
		;ハンデつけなかったら表示されないので無記入でよい
		PRINTFORML 
		RETURN 0
	ENDIF
	;-------------------------------------------------
	;戦闘中TARGET被弾時口上
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "被弾" 
		;別に一律で「やられたー」だけでもいいよ
		SELECTCASE 相手残機
			;残り残機3が表示されるのは【洽覧深識】持ちのみ
			CASE 3
				
				;小悪魔より戦闘力が低い場合。って分岐が可能だったら。満たした場合は上の台詞ではなくこっちに
				;本気を出すとか言うけど、「油断してたから喰らったかな…?」って話なので、パワーアップはしない
				IF ABL:戦闘能力 > ABL:MASTER:戦闘能力
					PRINTFORMW 「まぐれ当たり!?いや、油断してたか…?」
					PRINTFORMW 「ちゃんとそれなりの敬意を払わないといけませんよね。本気、ちゃんと出させてもらいますね!」
				ELSE
					PRINTFORMW 「当ててきますか。まあ、当然ですよね」
				ENDIF
			CASE 2
				PRINTFORMW 「まだまだ、です!」
			CASE 1
				IF ABL:戦闘能力 < ABL:MASTER:戦闘能力
					PRINTFORMW 「やっぱ無理かぁ…いや、最後まで…諦めだけはしません!」
				ELSE
					;HIPのyou。別にパワーアップは(ry
					PRINTFORMW 「私がここまで追い込まれるとは…だったら、悪魔らしくいかせてもらいます!」
				ENDIF
			CASE 0
				PRINTFORMW 「しま…っ!」
		ENDSELECT
	ENDIF
	;-------------------------------------------------
	;戦闘中
	;TARGETの【残忍酷薄】発動時
	;ARGはTARGETの残機
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "残忍酷薄"
		
	ENDIF
	;-------------------------------------------------
	;戦闘中
	;TARGETの【乾坤一擲】発動時
	;ARGはTARGETの残機
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "乾坤一擲"
		
	ENDIF
	;-------------------------------------------------
	;戦闘中
	;TARGETの【怪力乱神】発動時
	;ARGはTARGETの残機
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 0
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "怪力乱神"
		
	ENDIF
	
	;-------------------------------------------------
	;戦闘後
	;記入チェック（=0, 非表示、1, 表示）
	LOCAL:1 = 1
	;-------------------------------------------------
	IF LOCAL:1 && ARGS == "戦闘後" 
		PRINTFORML 
		;残り残機4が表示されうるのは【洽覧深識】持ちのみ
		;残機が1以上ならあなたの負け、0の場合はあなたの勝利
		SELECTCASE 相手残機
			CASE 4
				;小悪魔より戦闘力が低い場合。って分岐が可能だったら。満たした場合はこっちに
				IF ABL:戦闘能力 > ABL:MASTER:戦闘能力
					PRINTFORMW 「ふう、お疲れ様です。よくやった方だと思いますから、これから実力つけていきましょう!」
				;小悪魔は同格以上で一本も取れない場合、あなたがわざと負けたという認識をする
				ELSE
					PRINTFORMW 「ちょっと!?一本も取らないって、本当に真面目にやったんですか!?手ぇ抜いてませんか!?」
				ENDIF
			CASE 3
				PRINTFORMW 「ふう、いい運動になりました。お疲れ様です」
			CASE 2
				PRINTFORMW 「ふう…いい勝負でしたね。この感じなら、次も楽しめそうです」
			CASE 1
				PRINTFORMW 「はぁ…はぁ…中々でしたが、%NICKNAME:59%ちゃんの勝利でしたね!楽しかったです!」
			CASE 0
				;小悪魔より戦闘技能が高い。もしくは小悪魔に勝利済み
				IF ABL:戦闘能力 < ABL:MASTER:戦闘能力 || CFLAG:TARGET:弾幕勝負勝利 == 1
					PRINTFORML 「負けたと言ってもまあ、こうなるのは正直わかってたというか…%MASTERNAME:59%は強いですもの」
					PRINTFORMW 「あ、でもどうでしたか?私もちょっとは%MASTERNAME:59%の事も追い詰められました?」
				;小悪魔より戦闘技能が低い。小悪魔に勝利済みの場合は発生しない。好感度か何かに特別ボーナスあってもいいかも
				ELSEIF ABL:戦闘能力 > ABL:MASTER:戦闘能力
					PRINTFORMW 「負け…た…?私が…この…実力差…で…?」
					PRINTFORMW 「すごい…!すごいですね%MASTERNAME:59%!今度戦った時も、私が負けちゃうかもしれませんね!」
				;同格勝利
				ELSE
					PRINTFORML 「ふえぇ、負けちゃいました…お強いんですね、%MASTERNAME:59%は」
				ENDIF
		ENDSELECT
	ENDIF
RESETCOLOR
ENDIF
RETURN 1

