;COMF413 料理を作る.erbに統合されました＠料理改良パッチ
[SKIPSTART]
@MIX_MENU
PRINTL 何か混ぜますか？
{
CALL ASK_M(
	"やめておく",  1,
	"味付け変更", !GET_OPTION_COOKING("自動味付け設定"),
	"刺激的な味にする",  GET_OPTION_COOKING("異物混入可能"),
	"おクスリを処方する",  GET_OPTION_COOKING("薬物混入可能") && MAX(ITEM:媚薬, ITEM:利尿剤, ITEM:惚れ薬, ITEM:睡眠薬) > 0
	)
}
SELECTCASE RESULT
CASE 0
	RETURN
CASE 1
	CALL MANUAL_SEASONING
CASE 2
	CALL MIXTURE_SPICE
CASE 3
	CALL MIXTURE_DRUG
ENDSELECT
RETURN RESULT



@AUTO_SEASONING
#DIM AUTO_TASTE
SIF TCVAR:MASTER:308
	RETURN
TCVAR:MASTER:308 = (GET_OPTION_COOKING("自動味付け設定") - 10)



@MANUAL_SEASONING
PRINTL 味付けを変更しますか？
CALL ASK_M("普通",  1, "濃い味", 1, "薄味",  1)
SELECTCASE RESULT
CASE 2
	PRINTL 料理を薄味に味付けた
CASE 1
	PRINTL 料理を濃い味に味付けた
CASE 0
	PRINTFORML 料理を%CALLNAME:MASTER%好みに味付けた
ENDSELECT
SIF RESULT
	TCVAR:MASTER:308 = RESULT
RETURN RESULT



@MIXTURE_SPICE
#DIM CONST BIT_MIX_SPICE = 0, 3, 4, 5, 6
PRINTL 何を仕込もうか…
{
CALL ASK_M(
	"やっぱりやめる",  1,
	"激辛DEATHソース", 1,
	"激甘サッカリン",  1,
	"たっぷりワサビ",  1,
	"濃縮レモン果汁",  1)
}
SIF RESULT
	SETBIT TCVAR:MASTER:308, BIT_MIX_SPICE:RESULT
SELECTCASE RESULT
CASE 0
	RETURN
CASE 1
	PRINTFORML %CALLNAME:PLAYER%は作った%DISH_NAME%にDEATHソースを振りかけた
	PRINTFORML %DISH_NAME%はみるみるうちにハバネロカラーに染った
CASE 2
	PRINTFORML %CALLNAME:PLAYER%は%DISH_NAME%に白い粉末状のサッカリンを振りかけた 
	PRINTFORML 見た目では分からないが甘さは砂糖の300倍だ
CASE 3
	PRINTFORML %CALLNAME:PLAYER%は新鮮な山わさびを摩り下ろして%DISH_NAME%に加えた
	PRINTFORML ツンとしたいい香りが%CALLNAME:PLAYER%の鼻を突いた
CASE 4
	PRINTFORML %CALLNAME:PLAYER%は%DISH_NAME%に濃縮レモン果汁を振りかけた
	PRINTFORML 見た目にはわからないがさぞや酸っぱいことだろう
ENDSELECT
RETURN 1



@MIXTURE_DRUG
#DIM CONST BIT_MIX_DRUG = 0, 21, 22, 23, 24
PRINTL 何を仕込もうか…
{
CALL ASK_M(
	"やっぱりやめる",       1,
	"媚薬",   ITEM:媚薬   > 0,
	"利尿剤", ITEM:利尿剤 > 0,
	"惚れ薬", ITEM:惚れ薬 > 0,
	"睡眠薬", ITEM:睡眠薬 > 0)
}
SIF RESULT
	SETBIT TCVAR:MASTER:308, BIT_MIX_DRUG:RESULT
SELECTCASE RESULT
CASE 0
	RETURN
CASE 1
	PRINTFORML %CALLNAME:PLAYER%は懐から媚薬を出すと、%DISH_NAME%に混ぜた…
	ITEM:媚薬 --
CASE 2
	PRINTFORML %CALLNAME:PLAYER%は懐から利尿剤を出すと、%DISH_NAME%に混ぜた…
	ITEM:利尿剤 --
CASE 3
	PRINTFORML %CALLNAME:PLAYER%は懐から惚れ薬を出すと、%DISH_NAME%に混ぜた…
	ITEM:惚れ薬 --
CASE 4
	PRINTFORML %CALLNAME:PLAYER%は懐から睡眠薬を出すと、%DISH_NAME%に混ぜた…
	ITEM:睡眠薬 --
ENDSELECT
RETURN 1
[SKIPEND]


